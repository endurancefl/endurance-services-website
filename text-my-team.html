<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Endurance Services — Text My Team</title>
  <style>
    :root {
      --green-dark: #2D4A3E;
      --green-primary: #3A5F4B;
      --green-light: #4A7C5C;
      --green-accent: #6B9E7A;
      --green-pale: #E8F0EB;
      --cream: #F7FAF8;
      --text-dark: #1A2E24;
      --text-medium: #3D5A4A;
      --text-light: #6B8A78;
      --white: #FFFFFF;
      --shadow-sm: 0 1px 3px rgba(45, 74, 62, 0.12);
      --shadow-md: 0 4px 12px rgba(45, 74, 62, 0.15);
      --shadow-lg: 0 8px 30px rgba(45, 74, 62, 0.2);
      --radius: 12px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--cream);
      color: var(--text-dark);
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
    }

    /* Top green bar */
    .top-bar {
      background: linear-gradient(135deg, var(--green-dark) 0%, var(--green-primary) 100%);
      padding: 8px 0;
      text-align: center;
    }

    .top-bar-text {
      color: var(--green-accent);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    /* Header / Logo */
    .header {
      background: var(--white);
      padding: 28px 20px 24px;
      text-align: center;
      border-bottom: 1px solid var(--green-pale);
      box-shadow: var(--shadow-sm);
    }

    .logo {
      max-width: 200px;
      height: auto;
    }

    /* Main content */
    .main {
      flex: 1;
      padding: 24px 20px 32px;
      max-width: 480px;
      margin: 0 auto;
      width: 100%;
    }

    /* Search section */
    .section-label {
      font-size: 13px;
      font-weight: 700;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 1.5px;
      margin-bottom: 10px;
    }

    .search-container {
      position: relative;
      margin-bottom: 24px;
    }

    .search-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      color: var(--text-light);
      pointer-events: none;
      z-index: 2;
    }

    .search-input {
      width: 100%;
      padding: 16px 16px 16px 48px;
      font-size: 16px;
      border: 2px solid var(--green-pale);
      border-radius: var(--radius);
      background: var(--white);
      color: var(--text-dark);
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
      -webkit-appearance: none;
    }

    .search-input:focus {
      border-color: var(--green-primary);
      box-shadow: 0 0 0 3px rgba(58, 95, 75, 0.15);
    }

    .search-input::placeholder {
      color: var(--text-light);
    }

    /* Autocomplete dropdown */
    .autocomplete-list {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--white);
      border: 2px solid var(--green-primary);
      border-top: none;
      border-radius: 0 0 var(--radius) var(--radius);
      max-height: 200px;
      overflow-y: auto;
      z-index: 10;
      display: none;
      box-shadow: var(--shadow-md);
    }

    .autocomplete-list.active {
      display: block;
    }

    .autocomplete-item {
      padding: 14px 16px;
      cursor: pointer;
      font-size: 15px;
      color: var(--text-dark);
      border-bottom: 1px solid var(--green-pale);
      transition: background 0.15s;
    }

    .autocomplete-item:last-child {
      border-bottom: none;
    }

    .autocomplete-item:hover,
    .autocomplete-item:active {
      background: var(--green-pale);
    }

    .autocomplete-item .highlight {
      font-weight: 700;
      color: var(--green-primary);
    }

    /* Selected property card */
    .property-card {
      background: var(--white);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: var(--shadow-md);
      border-left: 4px solid var(--green-primary);
      display: none;
    }

    .property-card.active {
      display: block;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .property-address {
      font-size: 17px;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 6px;
    }

    .crew-info {
      font-size: 14px;
      color: var(--text-medium);
    }

    .crew-info strong {
      color: var(--green-primary);
    }

    /* Info message */
    .info-message {
      background: var(--green-pale);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 28px;
      font-size: 15px;
      line-height: 1.6;
      color: var(--text-medium);
      display: none;
    }

    .info-message.active {
      display: block;
      animation: slideIn 0.3s ease 0.1s both;
    }

    /* Text My Team button */
    .cta-container {
      display: none;
    }

    .cta-container.active {
      display: block;
      animation: slideIn 0.3s ease 0.2s both;
    }

    .cta-button {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: 100%;
      padding: 20px 32px;
      font-size: 20px;
      font-weight: 700;
      color: var(--white);
      background: linear-gradient(135deg, var(--green-primary) 0%, var(--green-light) 100%);
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      text-decoration: none;
      box-shadow: var(--shadow-lg);
      transition: transform 0.15s, box-shadow 0.15s;
      -webkit-tap-highlight-color: transparent;
      letter-spacing: 0.5px;
    }

    .cta-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 36px rgba(45, 74, 62, 0.28);
    }

    .cta-button:active {
      transform: translateY(1px);
      box-shadow: var(--shadow-md);
    }

    .cta-button svg {
      width: 26px;
      height: 26px;
      flex-shrink: 0;
    }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-light);
    }

    .empty-state svg {
      width: 64px;
      height: 64px;
      margin-bottom: 16px;
      color: var(--green-accent);
      opacity: 0.5;
    }

    .empty-state p {
      font-size: 15px;
      line-height: 1.5;
    }

    /* Footer */
    .footer {
      text-align: center;
      padding: 16px 20px 24px;
      font-size: 12px;
      color: var(--text-light);
    }

    .footer a {
      color: var(--green-primary);
      text-decoration: none;
    }

    /* Responsive fine-tuning */
    @media (min-width: 600px) {
      .main {
        padding: 32px 24px 40px;
      }
      .logo {
        max-width: 240px;
      }
    }
  </style>
</head>
<body>

  <header class="header">
    <img src="images/logo-stacked-fullcolor.png" alt="Endurance — A Landscape Company" class="logo">
  </header>

  <main class="main">
    <label class="section-label" for="property-search">Select Your Property</label>

    <div class="search-container">
      <!-- Search icon -->
      <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="7"/>
        <path d="M21 21l-4.35-4.35" stroke-linecap="round"/>
      </svg>

      <input
        type="text"
        id="property-search"
        class="search-input"
        placeholder="Search your address..."
        autocomplete="off"
      >
      <div id="autocomplete-list" class="autocomplete-list"></div>
    </div>

    <!-- Empty state (shown before selection) -->
    <div id="empty-state" class="empty-state">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 0115 0z"/>
      </svg>
      <p>Start typing your property address above<br>to connect with your crew.</p>
    </div>

    <!-- Selected property info -->
    <div id="property-card" class="property-card">
      <div class="property-address" id="card-address"></div>
      <div class="crew-info">Crew Leader: <strong id="card-crew"></strong></div>
    </div>

    <!-- Info message -->
    <div id="info-message" class="info-message">
      Please text the team, and the onsite crew leader will handle your request during today's service, or the office will follow up with a more detailed plan. Thank you!
      <br><br>
      ✅ Tip: You can attach photos in your text message to show us the issue.
    </div>

    <!-- CTA Button -->
    <div id="cta-container" class="cta-container">
      <a id="sms-link" href="#" class="cta-button">
        <!-- Chat bubble icon -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
        </svg>
        Text My Team
      </a>
    </div>
  </main>

  <footer class="footer">
    &copy; 2026 Endurance Services &middot; <a href="tel:+14075794403">(407) 579-4403</a>
  </footer>

  <script>
    // --- Property Data (from Excel) ---
    const properties = [
      {
        address: "916 Seville Place, Orlando, FL 32804",
        crewLeader: "Douglas McMahon",
        crewPhone: "4074064466"
      },
      {
        address: "2586 N Orange Blossom Trail, Orlando, FL 32804",
        crewLeader: "Jack McMahon",
        crewPhone: "4073424650"
      },
      {
        address: "723 Maryland Ave, Winter Park, FL 32789",
        crewLeader: "Molly McMahon",
        crewPhone: "4077125560"
      }
    ];

    const OFFICE_PHONE = "4075794403";

    // --- DOM refs ---
    const searchInput   = document.getElementById("property-search");
    const acList        = document.getElementById("autocomplete-list");
    const emptyState    = document.getElementById("empty-state");
    const propertyCard  = document.getElementById("property-card");
    const cardAddress   = document.getElementById("card-address");
    const cardCrew      = document.getElementById("card-crew");
    const infoMessage   = document.getElementById("info-message");
    const ctaContainer  = document.getElementById("cta-container");
    const smsLink       = document.getElementById("sms-link");

    let selectedProperty = null;

    // --- Autocomplete ---
    searchInput.addEventListener("input", function () {
      const query = this.value.trim().toLowerCase();
      acList.innerHTML = "";

      if (query.length === 0) {
        acList.classList.remove("active");
        return;
      }

      const matches = properties.filter(p =>
        p.address.toLowerCase().includes(query)
      );

      if (matches.length === 0) {
        acList.classList.remove("active");
        return;
      }

      matches.forEach(prop => {
        const item = document.createElement("div");
        item.classList.add("autocomplete-item");

        // Highlight matching text
        const idx = prop.address.toLowerCase().indexOf(query);
        if (idx >= 0) {
          item.innerHTML =
            escapeHtml(prop.address.substring(0, idx)) +
            '<span class="highlight">' + escapeHtml(prop.address.substring(idx, idx + query.length)) + '</span>' +
            escapeHtml(prop.address.substring(idx + query.length));
        } else {
          item.textContent = prop.address;
        }

        item.addEventListener("click", () => selectProperty(prop));
        acList.appendChild(item);
      });

      acList.classList.add("active");
    });

    // Close dropdown when clicking outside
    document.addEventListener("click", function (e) {
      if (!e.target.closest(".search-container")) {
        acList.classList.remove("active");
      }
    });

    // --- Select a property ---
    function selectProperty(prop) {
      selectedProperty = prop;
      searchInput.value = prop.address;
      acList.classList.remove("active");

      // Show card
      cardAddress.textContent = prop.address;
      cardCrew.textContent = prop.crewLeader;
      propertyCard.classList.add("active");

      // Show info message
      infoMessage.classList.add("active");

      // Show CTA
      ctaContainer.classList.add("active");

      // Hide empty state
      emptyState.style.display = "none";

      // Build SMS link
      smsLink.href = buildSmsUrl(prop);
    }

    // --- Build SMS URL (handles iOS vs Android) ---
    function buildSmsUrl(prop) {
      const now = new Date();
      const dateStr = now.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
      const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
      const body = encodeURIComponent("Property: " + prop.address + "\nCrew Leader: " + prop.crewLeader + "\nDate: " + dateStr + " at " + timeStr + "\n\n");
      const recipients = OFFICE_PHONE + "," + prop.crewPhone;

      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) ||
                    (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);

      if (isIOS) {
        // iOS: sms:/open?addresses=NUM1,NUM2&body=TEXT
        return "sms:/open?addresses=" + recipients + "&body=" + body;
      } else {
        // Android & fallback: sms:NUM1,NUM2?body=TEXT
        return "sms:" + recipients + "?body=" + body;
      }
    }

    // --- Utility ---
    function escapeHtml(str) {
      const div = document.createElement("div");
      div.appendChild(document.createTextNode(str));
      return div.innerHTML;
    }
  </script>
</body>
</html>
